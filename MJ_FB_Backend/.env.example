## Example backend environment variables
# All variables are required unless marked optional.

# PostgreSQL username
PG_USER=your_pg_username
# PostgreSQL password
PG_PASSWORD=your_pg_password
# Database host (use Lightsail endpoint DNS name, not an IP)
PG_HOST=localhost
# Database port
PG_PORT=5432
# Max connections in the Postgres pool (optional, default 10)
PG_POOL_MAX=10
# Database name
PG_DATABASE=mj_fb_db
# Optional CA bundle path for Postgres SSL
# Defaults to certs/rds-ca-central-1-bundle.pem if unset.
# The server exits on startup if the file is missing.
PG_CA_CERT=
# Secret used for signing JWT tokens for clients, staff, volunteers, and agencies
# Generate a strong random value, e.g.:
#   openssl rand -hex 32
JWT_SECRET=
# Secret used for signing refresh JWT tokens for all roles
JWT_REFRESH_SECRET=
# Days refresh tokens stay valid before requiring a new login (optional, default 365)
REFRESH_TOKEN_TTL_DAYS=365
# Allowed frontend origins for CORS and password setup links (comma separated)
# Include both localhost and 127.0.0.1 for local development
FRONTEND_ORIGIN=http://localhost:5173,http://127.0.0.1:5173
# Base URL where generated ICS files are hosted (optional)
ICS_BASE_URL=http://localhost:4000/ics
# Optional domain to scope authentication cookies
# Set to your production domain (e.g., example.com) to share cookies across subdomains.
# Omit in development so cookies default to localhost.
COOKIE_DOMAIN=
# Server port (defaults to 4000)
PORT=4000
# Brevo email configuration (optional)
BREVO_API_KEY=your_api_key
# Email address used as the sender
BREVO_FROM_EMAIL=noreply@example.com
# Optional sender name
BREVO_FROM_NAME=MJ Food Bank
# Enable email sending (set to true to send emails)
EMAIL_ENABLED=false
# Maximum retry attempts for queued emails (optional, default 5)
EMAIL_QUEUE_MAX_RETRIES=5
# Initial backoff delay in ms for email retries (optional, default 1000)
EMAIL_QUEUE_BACKOFF_MS=1000
# Days after which pending email jobs are removed from the queue (optional, default 30)
EMAIL_QUEUE_MAX_AGE_DAYS=30
# Log a warning if the email queue exceeds this size (optional, default 100)
EMAIL_QUEUE_WARNING_SIZE=100
# Force maintenance mode override (set to true/false, optional)
MAINTENANCE_MODE=
# Comma-separated IP addresses allowed during forced maintenance (optional)
MAINTENANCE_ALLOW_IPS=
# Brevo template ID used for invitation and password setup emails (optional, defaults to 6)
PASSWORD_SETUP_TEMPLATE_ID=6
# Hours until password setup tokens expire (optional, default 24)
PASSWORD_SETUP_TOKEN_TTL_HOURS=24

# Brevo template ID used for booking confirmation emails
BOOKING_CONFIRMATION_TEMPLATE_ID=2
# Brevo template ID used for booking reminder emails
BOOKING_REMINDER_TEMPLATE_ID=3
# Brevo template ID used for volunteer booking confirmation emails
VOLUNTEER_BOOKING_CONFIRMATION_TEMPLATE_ID=4
# Brevo template ID used for volunteer booking reminder emails
VOLUNTEER_BOOKING_REMINDER_TEMPLATE_ID=5
# Brevo template ID used for client reschedule emails
CLIENT_RESCHEDULE_TEMPLATE_ID=6
# Brevo template ID used for volunteer reschedule emails
VOLUNTEER_RESCHEDULE_TEMPLATE_ID=7
# Brevo template ID used for delivery request notifications
DELIVERY_REQUEST_TEMPLATE_ID=16
# Maximum delivery orders per client each month (optional, default 2, max 5)
DELIVERY_MONTHLY_ORDER_LIMIT=2

# Brevo template ID used for $1-$100 donor emails
DONOR_TEMPLATE_ID_1_100=11
# Brevo template ID used for $101-$500 donor emails
DONOR_TEMPLATE_ID_101_500=12
# Brevo template ID used for $501-$1,000 donor emails
DONOR_TEMPLATE_ID_501_1000=13
# Brevo template ID used for $1,001-$10,000 donor emails
DONOR_TEMPLATE_ID_1001_10000=14
# Brevo template ID used for $10,001-$30,000 donor emails
DONOR_TEMPLATE_ID_10001_30000=15

# Hours to wait before marking a volunteer shift as no-show
VOLUNTEER_NO_SHOW_HOURS=24
# Comma-separated list of emails to notify on nightly job failures (optional)
OPS_ALERT_EMAILS=
# Telegram bot token for ops alerts (optional)
TELEGRAM_BOT_TOKEN=
# Telegram chat ID to receive ops alerts (optional)
TELEGRAM_ALERT_CHAT_ID=
# Dead row threshold to trigger vacuum alerts (optional, default 5000)
VACUUM_ALERT_DEAD_ROWS_THRESHOLD=5000
# Relying party ID used for WebAuthn assertions (typically your domain)
WEBAUTHN_RP_ID=localhost
# Expected origin for WebAuthn assertions (scheme + host + optional port)
WEBAUTHN_ORIGIN=http://localhost:5173
